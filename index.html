<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Creative Spirits – Sampling Calculator</title>

  <style>
    :root{
      /* Light olive background */
      --bg1:#D9E2C3;
      --bg2:#CBD7B1;

      /* Surfaces */
      --card: rgba(255,255,255,.80);
      --border: rgba(0,0,0,.12);

      /* Text */
      --text:#10130F;
      --muted: rgba(16,19,15,.60);

      /* Buttons */
      --btnBg: rgba(255,255,255,.90);
      --btnBorder: rgba(0,0,0,.14);

      --dangerBg: rgba(176,0,32,.10);
      --dangerBorder: rgba(176,0,32,.25);
      --dangerText:#7a0016;

      --radius:16px;
    }

    *{ box-sizing:border-box; }

    html{
      height:100vh;
    }

    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: linear-gradient(180deg, var(--bg1), var(--bg2));
      color: var(--text);
      padding:14px;
      padding-bottom: calc(14px + env(safe-area-inset-bottom));
      height:100%;
    }

    .wrap{ max-width:980px; margin:0 auto; }

    /* Header */
    .header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      flex-wrap:wrap;
      margin-bottom:10px;
    }

    .logo-container{
      width:70%;
      max-width:420px;
      display:inline-block;
    }

    .logo-container img{
      width: 100%;
      height: 100%;
      object-fit: fill;
    }

    .pill{
      display:inline-flex;
      align-items:center;
      padding:8px 12px;
      border-radius:999px;
      background:rgba(255,255,255,.7);
      border:1px solid var(--border);
      color:var(--muted);
      font-size:13px;
      white-space:nowrap;
    }

    .card{
      background:var(--card);
      border:1px solid var(--border);
      border-radius:var(--radius);
      padding:14px;
      box-shadow:0 6px 18px rgba(0,0,0,.08);
    }

    .kpiRow{
      display:flex;
      justify-content:space-between;
      gap:12px;
      flex-wrap:wrap;
      align-items:baseline;
    }

    .kpiLabel{ font-size:13px; color:var(--muted); }
    .kpiValue{ font-size:44px; font-weight:900; line-height:1; }

    .kpiSub{
      margin-top:8px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      font-size:13px;
      color:var(--muted);
    }

    .controls{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top:12px;
    }

    button{
      border-radius:14px;
      border:1px solid var(--btnBorder);
      background:var(--btnBg);
      padding:12px 14px;
      font-size:15px;
      font-weight:750;
      cursor:pointer;
      -webkit-tap-highlight-color:transparent;
    }
    button:active{ transform:scale(.99); }

    .btnGhost{ background:transparent; }
    .btnDanger{
      background:var(--dangerBg);
      border-color:var(--dangerBorder);
      color:var(--dangerText);
    }

    .grid{
      margin-top:14px;
      display:grid;
      gap:10px;
      grid-template-columns:repeat(2,minmax(0,1fr));
    }
    @media (min-width:640px){ .grid{ grid-template-columns:repeat(3,minmax(0,1fr)); } }
    @media (min-width:980px){ .grid{ grid-template-columns:repeat(4,minmax(0,1fr)); } }

    .pbtn{
      background:rgba(255,255,255,.85);
      border:1px solid var(--btnBorder);
      border-radius:var(--radius);
      padding:14px;
      min-height:96px;
      display:flex;
      flex-direction:column;
      justify-content:space-between;
      gap:10px;
      text-align:left;
    }

    .pname{
      font-weight:900;
      font-size:15px;
      line-height:1.15;
    }

    .pmeta{
      display:flex;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
      font-size:12px;
      color:var(--muted);
    }

    .countBadge{
      min-width:34px;
      height:28px;
      padding:0 10px;
      border-radius:999px;
      background:rgba(0,0,0,.06);
      border:1px solid var(--border);
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight:900;
    }

    .breakdown{
      display:none;
      margin-top:14px;
      padding:12px;
      background:rgba(255,255,255,.75);
      border:1px solid var(--border);
      border-radius:var(--radius);
    }

    table{ width:100%; border-collapse:collapse; }
    th,td{ padding:10px 6px; border-bottom:1px solid rgba(0,0,0,.08); }
    th{ font-size:12px; color:var(--muted); text-align:left; }
    td.right,th.right{ text-align:right; }
  </style>
</head>

<body>
<div class="wrap">

  <div class="header">
    <div class="logo-container">
      <img src="assets/logo.png" alt="Creative Spirits Logo">
    </div>
    <div class="pill" id="tapInfo">0 samples</div>
  </div>

  <div class="card">
    <div class="kpiRow">
      <div>
        <div class="kpiLabel">Total standard drinks</div>
        <div class="kpiValue" id="totalStd">0.00</div>
      </div>
      <div style="text-align:right;">
        <div class="kpiLabel">Alcohol (grams)</div>
        <div class="kpiValue" style="font-size:28px;" id="totalGrams">0.00</div>
      </div>
    </div>

    <div class="kpiSub">
      <span class="pill">AU standard drink = 10 g</span>
      <span class="pill">Sample size = 8 mL</span>
    </div>

    <div class="controls">
      <button id="undoBtn">Undo last</button>
      <button id="toggleBreakdownBtn" class="btnGhost">Show breakdown</button>
      <button id="resetBtn" class="btnDanger">Reset</button>
    </div>
  </div>

  <div class="grid" id="grid"></div>

  <div class="breakdown" id="breakdownBox">
    <table>
      <thead>
        <tr>
          <th>Product</th>
          <th class="right">ABV%</th>
          <th class="right">Count</th>
          <th class="right">Std</th>
        </tr>
      </thead>
      <tbody id="tbody"></tbody>
    </table>
  </div>

</div>

<script>
  const SAMPLE_ML=8, DENSITY=0.789, STD=10;
  const PRODUCTS=[
    ["3 Grain Master Vodka",40],
    ["The Original Gin",40],
    ["Banksia Honey Gin",40],
    ["Doctor’s Limoncello",30],
    ["Mandorini",30],
    ["Citrus Fruit Salad",30],
    ["Madem Espresso",20],
    ["Bushranger Bullets",20],
    ["Raspberry Cream Lamington",20],
    ["Salted Caramel Popcorn",20]
  ];

  let counts={}, history=[], breakdown=false;
  PRODUCTS.forEach(p=>counts[p[0]]=0);

  const g=a=>SAMPLE_ML*(a/100)*DENSITY;
  const s=a=>g(a)/STD;

  const el=id=>document.getElementById(id);

  function tap(n,a){ counts[n]++; history.push(n); render(); }
  function undo(){ const n=history.pop(); if(!n)return; counts[n]--; render(); }
  function resetAll(){ PRODUCTS.forEach(p=>counts[p[0]]=0); history=[]; render(); }
  function toggle(){ breakdown=!breakdown; el("breakdownBox").style.display=breakdown?"block":"none"; }

  function render(){
    let tg=0, ts=0, tc=0, grid="";
    PRODUCTS.forEach(p=>{
      const c=counts[p[0]];
      tc+=c; ts+=s(p[1])*c; tg+=g(p[1])*c;
      grid+=`
      <button class="pbtn" onclick="tap('${p[0]}',${p[1]})">
        <div style="display:flex;justify-content:space-between;gap:10px">
          <div class="pname">${p[0]}</div>
          <div class="countBadge">${c}</div>
        </div>
        <div class="pmeta"><span>${p[1]}% ABV</span><span>${s(p[1]).toFixed(3)} std</span></div>
      </button>`;
    });
    el("grid").innerHTML=grid;
    el("totalStd").textContent=ts.toFixed(2);
    el("totalGrams").textContent=tg.toFixed(2);
    el("tapInfo").textContent=`${tc} sample${tc===1?"":"s"}`;

    const tbody=el("tbody");
    tbody.innerHTML="";
    PRODUCTS.forEach(p=>{
      tbody.innerHTML+=`<tr><td>${p[0]}</td><td class="right">${p[1]}</td><td class="right">${counts[p[0]]}</td><td class="right">${(s(p[1])*counts[p[0]]).toFixed(3)}</td></tr>`;
    });
  }

  el("undoBtn").onclick=undo;
  el("resetBtn").onclick=resetAll;
  el("toggleBreakdownBtn").onclick=toggle;
  render();
</script>
</body>
</html>
